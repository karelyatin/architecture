#
# Change the fields below for certain node names, interfaces and IPs to match your environment.
# "spec.desiredState.interfaces" can be added to support additional networks.
#

apiVersion: nmstate.io/v1
kind: NodeNetworkConfigurationPolicy
metadata:
  labels:
    osp/interface: eno1 # CHANGEME
  name: eno1-osp2 # CHANGEME
spec:
  desiredState:
    dns-resolver:
      config:
        search: []
        server:
        - 192.168.24.1 # CHANGEME
    routes:
      config:
      - destination: 0.0.0.0/0
        next-hop-address: 192.168.24.1 # CHANGEME
        next-hop-interface: eno1 # CHANGEME
    interfaces:
    - description: internalapi vlan interface
      ipv4:
        address:
        - ip: 172.17.1.5
          prefix-length: 24
        enabled: true
        dhcp: false
      ipv6:
        enabled: false
      name: eno1.301 # CHANGEME
      state: up
      type: vlan
      vlan:
        base-iface: eno1 # CHANGEME
        id: 301
    - description: storage vlan interface
      ipv4:
        address:
        - ip: 172.17.3.5
          prefix-length: 24
        enabled: true
        dhcp: false
      ipv6:
        enabled: false
      name: eno1.302 # CHANGEME
      state: up
      type: vlan
      vlan:
        base-iface: eno1 # CHANGEME
        id: 302
    - description: tenant vlan interface
      ipv4:
        address:
        - ip: 172.17.2.5
          prefix-length: 24
        enabled: true
        dhcp: false
      ipv6:
        enabled: false
      name: eno1.304 # CHANGEME
      state: up
      type: vlan
      vlan:
        base-iface: eno1 # CHANGEME
        id: 304
    - description: Configuring eno1 # CHANGEME
      ipv4:
        address:
        - ip: 192.168.24.10 # CHANGEME
          prefix-length: 24
        enabled: true
        dhcp: false
      ipv6:
        enabled: false
      # MTU 9000 is used to access Ceph via the storage network
      # If storage network is on its own NIC adjust accordingly
      # Using >1 NIC is not currently represented in these CRs
      name: eno1 # CHANGEME
      state: up
      type: ethernet
  nodeSelector:
    kubernetes.io/hostname: ospperf2.mobius.lab.eng.rdu2.redhat.com # CHANGEME
    node-role.kubernetes.io/worker: ""
